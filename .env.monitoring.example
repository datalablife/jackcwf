# Monitoring Stack Environment Configuration
# Copy this file to .env.monitoring and fill in your values

# ============================================
# Grafana Configuration
# ============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=changeme_secure_password
GRAFANA_SERVER_ROOT_URL=http://localhost:3001

# ============================================
# Prometheus Configuration
# ============================================
PROMETHEUS_RETENTION_TIME=30d
PROMETHEUS_RETENTION_SIZE=10GB

# ============================================
# AlertManager Configuration
# ============================================

# Email Alerts (SMTP)
SMTP_SMARTHOST=smtp.gmail.com:587
SMTP_FROM=alerts@yourdomain.com
SMTP_AUTH_USERNAME=alerts@yourdomain.com
SMTP_AUTH_PASSWORD=your_smtp_app_password

# Slack Alerts
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL
SLACK_CHANNEL_CRITICAL=#alerts-critical
SLACK_CHANNEL_BACKEND=#backend-alerts
SLACK_CHANNEL_OPS=#ops-alerts

# PagerDuty (Optional)
PAGERDUTY_SERVICE_KEY=your_pagerduty_integration_key

# ============================================
# Elasticsearch Configuration
# ============================================
ES_JAVA_OPTS=-Xms1g -Xmx1g
ELASTICSEARCH_HOSTS=http://elasticsearch:9200

# Index Management
ES_INDEX_RETENTION_DAYS=30
ES_INDEX_REPLICAS=0
ES_INDEX_SHARDS=1

# ============================================
# Logstash Configuration
# ============================================
LS_JAVA_OPTS=-Xms512m -Xmx512m
LOGSTASH_PIPELINE_WORKERS=2
LOGSTASH_PIPELINE_BATCH_SIZE=125

# ============================================
# Kibana Configuration
# ============================================
KIBANA_ELASTICSEARCH_HOSTS=http://elasticsearch:9200
KIBANA_SERVER_NAME=langchain-ai-kibana

# ============================================
# Application Configuration
# ============================================
ENVIRONMENT=production
CLUSTER=coolify
HOSTNAME=langchain-ai-prod

# Application URL (for metrics scraping)
APP_METRICS_URL=http://host.docker.internal:8000/metrics
# For production with domain:
# APP_METRICS_URL=https://pgvctor.jackcwf.com/metrics

# ============================================
# Monitoring Intervals
# ============================================
PROMETHEUS_SCRAPE_INTERVAL=15s
PROMETHEUS_EVALUATION_INTERVAL=15s
MONITORING_INTERVAL_SECONDS=30

# ============================================
# Resource Limits
# ============================================

# Elasticsearch
ES_MEM_LIMIT=2g
ES_DISK_WATERMARK_LOW=85%
ES_DISK_WATERMARK_HIGH=90%

# Prometheus
PROMETHEUS_MEM_LIMIT=1g

# Logstash
LOGSTASH_MEM_LIMIT=1g

# Grafana
GRAFANA_MEM_LIMIT=512m

# ============================================
# Network Configuration
# ============================================
MONITORING_NETWORK=monitoring
APP_NETWORK=app-network

# ============================================
# Security Configuration
# ============================================

# Enable/disable security features
ENABLE_XPACK_SECURITY=false
ENABLE_BASIC_AUTH=true

# TLS/SSL (for production)
ENABLE_TLS=false
TLS_CERT_PATH=/etc/ssl/certs
TLS_KEY_PATH=/etc/ssl/private

# ============================================
# Alert Thresholds
# ============================================

# Latency thresholds (milliseconds)
ALERT_LATENCY_WARNING=3000
ALERT_LATENCY_CRITICAL=5000

# Cache thresholds (percentage)
ALERT_CACHE_HIT_RATE_LOW=30

# Resource thresholds (percentage)
ALERT_CPU_WARNING=80
ALERT_CPU_CRITICAL=90
ALERT_MEMORY_WARNING=80
ALERT_MEMORY_CRITICAL=90
ALERT_DISK_WARNING=80

# Error rate threshold (percentage)
ALERT_ERROR_RATE_HIGH=5

# ============================================
# Backup Configuration
# ============================================
BACKUP_ENABLED=true
BACKUP_RETENTION_DAYS=7
BACKUP_SCHEDULE="0 2 * * *"  # Daily at 2 AM

# ============================================
# Logging Configuration
# ============================================
LOG_LEVEL=info
LOG_FORMAT=json

# ============================================
# Feature Flags
# ============================================
ENABLE_NODE_EXPORTER=true
ENABLE_CADVISOR=true
ENABLE_POSTGRES_EXPORTER=false
ENABLE_REDIS_EXPORTER=false

# ============================================
# Time Zone
# ============================================
TZ=UTC
