# Project Specification and Constitution System

è¿™æ˜¯äº‘å¼€å‘ LangChain v1.0 RAG AI Agent é¡¹ç›®çš„è§„èŒƒå’Œå®ªæ³•ç®¡ç†ç³»ç»Ÿã€‚

## ğŸ“‹ ç›®å½•ç»“æ„

```
.specify/
â”œâ”€â”€ README.md                    # æœ¬æ–‡ä»¶
â”œâ”€â”€ memory/
â”‚   â””â”€â”€ constitution.md          # é¡¹ç›®å®ªæ³• (8ä¸ªæ ¸å¿ƒåŸåˆ™)
â””â”€â”€ templates/
    â”œâ”€â”€ spec-template.md         # åŠŸèƒ½è§„èŒƒæ¨¡æ¿
    â”œâ”€â”€ plan-template.md         # å®ç°è®¡åˆ’æ¨¡æ¿
    â”œâ”€â”€ tasks-template.md        # ä»»åŠ¡åˆ†è§£æ¨¡æ¿
    â””â”€â”€ commands/
        â””â”€â”€ constitution-check.md # å®ªæ³•æ£€æŸ¥å‘½ä»¤
```

## ğŸ¯ é¡¹ç›®å®ªæ³• (Constitution)

é¡¹ç›®å®ªæ³•å®šä¹‰äº† 8 ä¸ªæ ¸å¿ƒåŸåˆ™ï¼Œç¡®ä¿æ‰€æœ‰å¼€å‘å·¥ä½œéµå¾ªä¸€è‡´çš„æ ‡å‡†ï¼š

### æ ¸å¿ƒåŸåˆ™

1. **AI-First æ¶æ„** (åŸºäº LangChain v1.0)
   - ä½¿ç”¨ `create_agent()` API æ„å»º Agent
   - å®ç°ä¸­é—´ä»¶ç³»ç»Ÿ
   - æ”¯æŒ LangGraph æŒä¹…åŒ–å’Œæµå¼å“åº”
   - æ”¯æŒå¤šä¸ª LLM æä¾›å•†

2. **æ¨¡å—åŒ–ä¸­é—´ä»¶æ¡†æ¶**
   - æ´‹è‘±æ¨¡å‹ (Onion Pattern)
   - 5 ä¸ªæ ¸å¿ƒä¸­é—´ä»¶ï¼šè®¤è¯ã€è®°å¿†æ³¨å…¥ã€å®¡æ ¸ã€å“åº”ç»“æ„åŒ–ã€å®¡è®¡æ—¥å¿—
   - æ¡ä»¶å¯ç”¨å’Œä¼˜é›…é”™è¯¯å¤„ç†

3. **å‘é‡å­˜å‚¨å“è¶Šæ€§** (PostgreSQL + pgvector)
   - ç»´åº¦ç»Ÿä¸€ä¸º 1536 (OpenAI Ada)
   - HNSW ç´¢å¼•ä¼˜åŒ–
   - æœç´¢å»¶è¿Ÿ â‰¤ 200ms P99
   - è½¯åˆ é™¤å’Œå®¡è®¡è¿½è¸ª

4. **ç±»å‹å®‰å…¨å’ŒéªŒè¯**
   - Python 3.14+ with `from __future__ import annotations`
   - Pydantic v2 æ¨¡å‹
   - mypy --strict 100% é€šè¿‡
   - è¿è¡Œæ—¶éªŒè¯

5. **å¼‚æ­¥ä¼˜å…ˆå®ç°**
   - æ‰€æœ‰ I/O ä½¿ç”¨ `async/await`
   - asyncpg æ•°æ®åº“é©±åŠ¨
   - asyncio.Semaphore å¹¶å‘æ§åˆ¶
   - æ— è¶…è¿‡ 100 ä¸ªæœªè§£æä»»åŠ¡

6. **è¯­ä¹‰ä»£ç ç»„ç»‡**
   - åˆ†å±‚æ¶æ„ï¼šapi â†’ services â†’ repositories â†’ models â†’ infrastructure
   - æ¸…æ™°çš„å‘½åå’ŒèŒè´£åˆ’åˆ†
   - ç¦æ­¢å¾ªç¯ä¾èµ–

7. **ç”Ÿäº§å°±ç»ªæ€§**
   - æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80%
   - ä¼˜é›…å…³é—­ (Graceful Shutdown)
   - å¥åº·æ£€æŸ¥å’Œé™æµ
   - æ•æ„Ÿä¿¡æ¯ç®¡ç†

8. **å¯è§‚æµ‹æ€§å’Œç›‘æ§**
   - ç»“æ„åŒ– JSON æ—¥å¿—
   - è¯·æ±‚è¿½è¸ª (X-Request-ID)
   - OpenTelemetry åˆ†å¸ƒå¼è¿½è¸ª
   - 4 ä¸ªé»„é‡‘æŒ‡æ ‡æ”¶é›†

è¯¦è§: [constitution.md](./memory/constitution.md)

---

## ğŸ“ è§„èŒƒç³»ç»Ÿ

### å·¥ä½œæµç¨‹

```
éœ€æ±‚ â†’ è§„èŒƒ (spec) â†’ è®¡åˆ’ (plan) â†’ ä»»åŠ¡ (tasks) â†’ å®ç° â†’ å®¡æŸ¥ â†’ éƒ¨ç½²
```

### 1. åŠŸèƒ½è§„èŒƒ (spec-template.md)

ç¼–å†™æ–°åŠŸèƒ½æ—¶ï¼Œåˆ›å»ºè¯¦ç»†è§„èŒƒï¼š

**åŒ…å«å†…å®¹**:
- åŠŸèƒ½æ¦‚è¿°å’Œä¼˜å…ˆçº§
- ç”¨æˆ·æ•…äº‹å’Œæ¥å—æ ‡å‡†
- æŠ€æœ¯éœ€æ±‚ (æ•°æ®æ¨¡å‹ã€APIã€æ•°æ®åº“)
- å‘é‡å­˜å‚¨éœ€æ±‚ (ç»´åº¦ã€ç´¢å¼•ã€è¶…æ—¶)
- ä¸­é—´ä»¶éœ€æ±‚
- å¼‚æ­¥å’Œå¹¶å‘è®¾è®¡
- ç›‘æ§æŒ‡æ ‡å’Œå‘Šè­¦
- æµ‹è¯•ç­–ç•¥
- å®‰å…¨å’Œåˆè§„

**å¿«é€Ÿå¼€å§‹**:
```bash
# å¤åˆ¶æ¨¡æ¿
cp .specify/templates/spec-template.md docs/features/new-feature-spec.md

# ç¼–è¾‘å¹¶å¡«å……å†…å®¹
vim docs/features/new-feature-spec.md
```

### 2. å®ç°è®¡åˆ’ (plan-template.md)

æ ¹æ®è§„èŒƒåˆ›å»ºå®ç°è®¡åˆ’ï¼š

**åŒ…å«å†…å®¹**:
- ç³»ç»Ÿæ•´ä½“æ¶æ„å›¾
- ä¸­é—´ä»¶æ¶æ„è®¾è®¡
- æ•°æ®æµè®¾è®¡
- æ•°æ®åº“è®¾è®¡ (è¡¨ç»“æ„ã€åˆ†åŒºã€ç´¢å¼•)
- åç«¯é¡¹ç›®ç»“æ„å’Œæ¨¡å—è®¾è®¡
- å‰ç«¯é¡¹ç›®ç»“æ„å’Œ UI é›†æˆ
- ç›‘æ§å’Œå¯è§‚æµ‹æ€§è®¾è®¡
- æµ‹è¯•ç­–ç•¥ (å•å…ƒã€é›†æˆã€E2E)
- éƒ¨ç½²è®¡åˆ’å’Œç¯å¢ƒé…ç½®
- æ€§èƒ½ç›®æ ‡
- é£é™©å’Œç¼“è§£ç­–ç•¥

**å¿«é€Ÿå¼€å§‹**:
```bash
# å¤åˆ¶æ¨¡æ¿
cp .specify/templates/plan-template.md docs/features/new-feature-plan.md

# ç¼–è¾‘å¹¶å¡«å……å†…å®¹
vim docs/features/new-feature-plan.md
```

### 3. ä»»åŠ¡åˆ†è§£ (tasks-template.md)

å°†è®¡åˆ’åˆ†è§£ä¸ºå¯æ‰§è¡Œä»»åŠ¡ï¼š

**åŒ…å«å†…å®¹**:
- Story åˆ†è§£ (æŒ‰ä¼˜å…ˆçº§ P0-P2)
- å…·ä½“ Task å’Œå®Œæˆæ ‡å‡†
- æŠ€æœ¯çº¦æŸå’Œç¤ºä¾‹ä»£ç 
- æ€§èƒ½ç›®æ ‡
- ä¾èµ–å…³ç³»å›¾
- Definition of Done
- æ—¶é—´ä¼°ç®—

**å¿«é€Ÿå¼€å§‹**:
```bash
# å¤åˆ¶æ¨¡æ¿
cp .specify/templates/tasks-template.md docs/features/new-feature-tasks.md

# ç¼–è¾‘å¹¶å¡«å……å†…å®¹
vim docs/features/new-feature-tasks.md
```

---

## ğŸ› ï¸ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

### å®ªæ³•æ£€æŸ¥

```bash
# æ£€æŸ¥æ•´ä¸ªé¡¹ç›®çš„å®ªæ³•åˆè§„æ€§
/speckit.constitution-check

# æ£€æŸ¥ç‰¹å®šæ–‡ä»¶
/speckit.constitution-check backend/src/services/agent_service.py

# ç”Ÿæˆè¯¦ç»†æŠ¥å‘Š
/speckit.constitution-check --detailed
```

### è§„èŒƒå’Œè®¡åˆ’

```bash
# åˆ›å»ºæ–°åŠŸèƒ½è§„èŒƒ
/speckit.specify "AI-Powered Chat Feature"

# æ ¹æ®è§„èŒƒç”Ÿæˆè®¡åˆ’
/speckit.plan

# åˆ†è§£è®¡åˆ’ä¸ºä»»åŠ¡
/speckit.tasks

# ä¸€è‡´æ€§æ£€æŸ¥
/speckit.analyze
```

---

## ğŸ“Š å®ªæ³•ç‰ˆæœ¬å†å²

### v1.0.0 (2025-11-16)
- âœ… åˆå§‹å®ªæ³•åˆ¶å®š
- âœ… 8 ä¸ªæ ¸å¿ƒåŸåˆ™å®šä¹‰
- âœ… LangChain v1.0 æ¶æ„ç¡®è®¤
- âœ… PostgreSQL + pgvector å‘é‡å­˜å‚¨
- âœ… ä¸­é—´ä»¶æ¡†æ¶è§„èŒƒ
- âœ… å¯è§‚æµ‹æ€§å’Œç›‘æ§æ ‡å‡†

---

## ğŸ“ å­¦ä¹ èµ„æº

### é¡¹ç›®å®ªæ³•
- [å®Œæ•´å®ªæ³•æ–‡æ¡£](./memory/constitution.md)
- [æ ¸å¿ƒåŸåˆ™è¯¦è§£](#æ ¸å¿ƒåŸåˆ™)
- [æ²»ç†è§„åˆ™](./memory/constitution.md#æ²»ç†è§„åˆ™)

### è§„èŒƒç³»ç»Ÿ
- [åŠŸèƒ½è§„èŒƒæ¨¡æ¿](./templates/spec-template.md)
- [å®ç°è®¡åˆ’æ¨¡æ¿](./templates/plan-template.md)
- [ä»»åŠ¡åˆ†è§£æ¨¡æ¿](./templates/tasks-template.md)

### æŠ€æœ¯å‚è€ƒ
- [LangChain v1.0 æ–‡æ¡£](https://docs.langchain.com/oss/python/releases/langchain-v1)
- [PostgreSQL pgvector](https://github.com/pgvector/pgvector)
- [Tailark UI åº“](https://tailark.com)
- [FastAPI æ–‡æ¡£](https://fastapi.tiangolo.com)

---

## ğŸ“‹ åˆè§„æ£€æŸ¥æ¸…å•

ä½¿ç”¨ä»¥ä¸‹æ¸…å•ç¡®ä¿é¡¹ç›®åˆè§„ï¼š

- [ ] å®ªæ³•ç‰ˆæœ¬æ˜¯å¦ä¸ºæœ€æ–° (v1.0.0+)?
- [ ] æ‰€æœ‰ API ç«¯ç‚¹éƒ½æœ‰ç±»å‹æ³¨è§£å—?
- [ ] æ‰€æœ‰æ•°æ®åº“æ“ä½œéƒ½æ˜¯å¼‚æ­¥çš„å—?
- [ ] æ‰€æœ‰ä¸­é—´ä»¶éƒ½å·²å®ç°å—?
- [ ] å‘é‡æœç´¢å»¶è¿Ÿ â‰¤ 200ms å—?
- [ ] æµ‹è¯•è¦†ç›–ç‡ â‰¥ 80% å—?
- [ ] æ‰€æœ‰æ•æ„Ÿä¿¡æ¯éƒ½åœ¨ç¯å¢ƒå˜é‡ä¸­å—?
- [ ] ç›‘æ§å‘Šè­¦å·²é…ç½®å—?
- [ ] éƒ¨ç½²å‰å¥åº·æ£€æŸ¥å·²é€šè¿‡å—?

---

## â“ å¸¸è§é—®é¢˜

**Q: æˆ‘å¦‚ä½•å¼€å§‹ä¸€ä¸ªæ–°åŠŸèƒ½?**
A: å‚è€ƒ[å·¥ä½œæµç¨‹](#å·¥ä½œæµç¨‹)ï¼Œä»åˆ›å»ºè§„èŒƒå¼€å§‹ã€‚å¤åˆ¶ `spec-template.md` å¹¶å¡«å……å†…å®¹ã€‚

**Q: å¦‚ä½•æ£€æŸ¥æˆ‘çš„ä»£ç æ˜¯å¦ç¬¦åˆå®ªæ³•?**
A: è¿è¡Œ `/speckit.constitution-check backend/src/your_file.py` è¿›è¡Œè‡ªåŠ¨æ£€æŸ¥ã€‚

**Q: ä»€ä¹ˆæ—¶å€™åº”è¯¥ä¿®æ”¹å®ªæ³•?**
A: ä»…åœ¨é‡å¤§åŸåˆ™å˜æ›´æ—¶ã€‚å‚è€ƒ[æ²»ç†è§„åˆ™](./memory/constitution.md#æ²»ç†è§„åˆ™)ä¸­çš„ä¿®è®¢æµç¨‹ã€‚

**Q: å¦‚ä½•å¤„ç†å®ªæ³•å’Œä»£ç ä¹‹é—´çš„å†²çª?**
A: å®ªæ³•ä¼˜å…ˆã€‚ä¿®æ”¹ä»£ç ä»¥éµå®ˆå®ªæ³•ï¼Œè€Œä¸æ˜¯ä¿®æ”¹å®ªæ³•ä»¥é€‚åº”ä»£ç ã€‚

---

## ğŸ“ è”ç³»å’Œåé¦ˆ

- **é¡¹ç›®ç»´æŠ¤è€…**: äº‘å¼€å‘å›¢é˜Ÿ
- **å®ªæ³•æ£€æŸ¥**: æ¯æœˆè¿›è¡Œä¸€æ¬¡
- **ææ¡ˆæµç¨‹**: åœ¨ GitHub Issues ä¸­æå‡ºåŸåˆ™ä¿®æ”¹å»ºè®®
- **åé¦ˆ**: æ¬¢è¿åœ¨é¡¹ç›®è®¨è®ºä¸­æå‡ºå»ºè®®

---

**æœ€åæ›´æ–°**: 2025-11-16
**çŠ¶æ€**: ç”Ÿäº§å°±ç»ª âœ…
**ç‰ˆæœ¬**: v1.0.0
