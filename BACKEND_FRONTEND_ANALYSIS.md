# ðŸ“‹ åŽç«¯æœåŠ¡å™¨è¿è¡Œåˆ†æžæŠ¥å‘Š

**ç”Ÿæˆæ—¶é—´**: 2025-11-21 04:54 UTC
**ç³»ç»ŸçŠ¶æ€**: âœ… åŽç«¯å’Œå‰ç«¯éƒ½åœ¨æ­£å¸¸è¿è¡Œ

---

## ðŸŽ¯ ä¸‰ä¸ªé—®é¢˜çš„è¯¦ç»†è§£ç­”

### **é—®é¢˜1ï¸âƒ£: ä¸ºä»€ä¹ˆåŽç«¯æœåŠ¡å™¨ä¼šè‡ªåŠ¨å…³é—­ï¼Ÿ**

#### å½“å‰çŠ¶æ€
âœ… **åŽç«¯æœåŠ¡å™¨ç›®å‰NOTè‡ªåŠ¨å…³é—­ - ä¸€ç›´åœ¨è¿è¡Œä¸­**
- è¿›ç¨‹ID: 4376
- ç›‘å¬ç«¯å£: 8000
- è¿è¡Œæ—¶é—´: 18å°æ—¶40åˆ†é’Ÿ (è‡ª 2025-11-20 10:14 å¯åŠ¨)
- çŠ¶æ€: âœ… healthy

#### åŽç«¯å¯èƒ½ä¼šè‡ªåŠ¨å…³é—­çš„åŽŸå› 

å¦‚æžœæ‚¨ä¹‹å‰è§‚å¯Ÿåˆ°åŽç«¯è‡ªåŠ¨å…³é—­ï¼Œå¯èƒ½åŽŸå› åŒ…æ‹¬ï¼š

| åŽŸå›  | è¯´æ˜Ž | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| **1. ä»£ç è¯­æ³•é”™è¯¯** | å¯¼å…¥é”™è¯¯ã€æ¨¡åž‹å®šä¹‰é”™è¯¯ç­‰ | å·²ä¿®å¤3ä¸ªå…³é”®å¯¼å…¥é”™è¯¯ |
| **2. æ•°æ®åº“è¿žæŽ¥å¤±è´¥** | æ— æ³•è¿žæŽ¥åˆ° PostgreSQL | æ£€æŸ¥ DATABASE_URL çŽ¯å¢ƒå˜é‡ |
| **3. ä¾èµ–åŒ…ç¼ºå¤±** | å¯¼å…¥çš„æ¨¡å—ä¸å­˜åœ¨ | è¿è¡Œ `pip install -r requirements.txt` |
| **4. ç«¯å£è¢«å ç”¨** | å…¶ä»–è¿›ç¨‹å ç”¨ 8000 ç«¯å£ | æ›´æ”¹ç«¯å£æˆ–æ€æ­»å ç”¨è¿›ç¨‹ |
| **5. å†…å­˜ä¸è¶³** | ç³»ç»Ÿèµ„æºè€—å°½ | å¢žåŠ ç³»ç»Ÿå†…å­˜ |
| **6. é…ç½®çŽ¯å¢ƒå˜é‡ç¼ºå¤±** | JWT_SECRET_KEY ç­‰æœªè®¾ç½® | åœ¨ .env æ–‡ä»¶ä¸­é…ç½® |
| **7. æ•°æ®åº“åˆå§‹åŒ–å¤±è´¥** | è¡¨åˆ†åŒºæˆ–è¿ç§»é”™è¯¯ | æ£€æŸ¥æ•°æ®åº“æ—¥å¿— |
| **8. åŽå°è¿è¡Œæ–¹å¼** | ç»ˆç«¯å…³é—­æˆ– SSH æ–­å¼€ | ä½¿ç”¨ `nohup` æˆ– screen/tmux åŽå°è¿è¡Œ |

**ç›®å‰çš„åŽç«¯ä¸ºä»€ä¹ˆè¿˜åœ¨è¿è¡Œ:**
- âœ… æ‰€æœ‰å¯¼å…¥é”™è¯¯å·²ä¿®å¤
- âœ… ä»£ç è¯­æ³•æ£€æŸ¥é€šè¿‡
- âœ… æ•°æ®åº“è¿žæŽ¥å·²å»ºç«‹
- âœ… è¿›ç¨‹å¤„äºŽç¨³å®šçŠ¶æ€

---

### **é—®é¢˜2ï¸âƒ£: å‰ç«¯æ˜¯å¦ä¸ŽåŽç«¯ç¨‹åºè¿žé€šï¼Ÿ**

#### ðŸ“Š è¿žé€šæ€§æµ‹è¯•ç»“æžœ

| æµ‹è¯•é¡¹ | ç»“æžœ | çŠ¶æ€ |
|--------|------|------|
| **åŽç«¯ API å¯è®¿é—®æ€§** | `http://localhost:8000/health` | âœ… 200 OK |
| **åŽç«¯å¥åº·æ£€æŸ¥** | `status: healthy` | âœ… æ­£å¸¸ |
| **å‰ç«¯æœåŠ¡å™¨å¯è®¿é—®æ€§** | `http://localhost:5173` | âœ… 200 OK |
| **ç½‘ç»œè¿žé€šæ€§** | ä¸¤ä¸ªè¿›ç¨‹åœ¨åŒä¸€ä¸»æœº | âœ… ç›´è¿ž |
| **API åŸºç¡€ URL** | `http://localhost:8000/api/v1` | âœ… å·²é…ç½® |

#### ðŸ”— å‰ç«¯å¯¹åŽç«¯çš„è°ƒç”¨é…ç½®

```typescript
// å‰ç«¯ä»£ç ä½ç½®: src/services/api.ts

const API_BASE_URL = import.meta.env.VITE_API_BASE_URL || 'http://localhost:8000/api/v1';
```

**é…ç½®è¯´æ˜Ž:**
- ä½¿ç”¨çŽ¯å¢ƒå˜é‡ `VITE_API_BASE_URL` (å¦‚æžœè®¾ç½®)
- é»˜è®¤å€¼: `http://localhost:8000/api/v1`
- å½“å‰ä½¿ç”¨: é»˜è®¤å€¼

#### ðŸ“¡ å®žé™…è¿žé€šæ€§æµ‹è¯•

```bash
$ curl http://localhost:8000/api/v1/conversations
HTTP Status: 404
```

**404 çš„å«ä¹‰:**
- âœ… ç½‘ç»œè¿žæŽ¥: æˆåŠŸ (æ”¶åˆ°å“åº”)
- âœ… åŽç«¯æœåŠ¡: åœ¨çº¿ (èƒ½å“åº”)
- â“ è·¯ç”±å®šä¹‰: è¯¥ç«¯ç‚¹æœªå®Œå…¨å®žçŽ°

**å·²å®šä¹‰ä¸”å¯ç”¨çš„è·¯ç”±:**
- âœ… `/health` - å¥åº·æ£€æŸ¥
- âœ… `/api/v1/documents` - æ–‡æ¡£ç®¡ç†
- âœ… `/api/v1/messages` - æ¶ˆæ¯å¤„ç†
- âœ… `/api/v1/tools` - å·¥å…·ç®¡ç†
- âœ… `/ws` - WebSocket å®žæ—¶é€šä¿¡
- âœ… `/api/v1/stream` - æµå¼å“åº”
- âœ… `/api/v1/cache-admin` - ç¼“å­˜ç®¡ç†
- âœ… `/api/v1/claude-cache` - Claude ç¼“å­˜
- âœ… `/api/v1/threads` - Thread API
- âš ï¸ `/api/v1/conversations` - 404 (éœ€è¦å®žçŽ°)

#### âœ… å‰åŽç«¯è¿žé€šæ€§ç»“è®º

**å‰ç«¯ â†”ï¸ åŽç«¯: ç½‘ç»œè¿žé€šï¼Œå¯æ­£å¸¸é€šä¿¡**

è™½ç„¶æŸäº› API ç«¯ç‚¹æœªå®žçŽ°ï¼ˆè¿”å›ž 404ï¼‰ï¼Œä½†é€šä¿¡é€šé“æ˜¯ç•…é€šçš„ã€‚å‰ç«¯èƒ½å¤Ÿ:
- âœ… è®¿é—®åŽç«¯æœåŠ¡
- âœ… å‘é€ HTTP è¯·æ±‚
- âœ… æŽ¥æ”¶åŽç«¯å“åº”
- âœ… ä½¿ç”¨ WebSocket å®žæ—¶é€šä¿¡

---

### **é—®é¢˜3ï¸âƒ£: åŽç«¯æœåŠ¡å™¨çš„å¯åŠ¨æ˜¯å¦ä¼šå¯¹å‰ç«¯è¿è¡Œå…³è”ï¼Ÿ**

#### ðŸ“Š å‰åŽç«¯ä¾èµ–å…³ç³»åˆ†æž

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  å‰ç«¯ (Vite + React 19)                             â”‚
â”‚  - PID: 35578                                       â”‚
â”‚  - ç«¯å£: 5173                                       â”‚
â”‚  - çŠ¶æ€: ç‹¬ç«‹è¿è¡Œ                                   â”‚
â”‚                                                     â”‚
â”‚  âž¡ï¸  ç½‘ç»œè°ƒç”¨ (HTTP/WebSocket)                      â”‚
â”‚      (å¯é€‰ï¼Œéžå…³é”®ä¾èµ–)                              â”‚
â”‚                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â”‚ (ç‹¬ç«‹è¿›ç¨‹)
         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  åŽç«¯ (FastAPI + Uvicorn)                           â”‚
â”‚  - PID: 4376                                        â”‚
â”‚  - ç«¯å£: 8000                                       â”‚
â”‚  - çŠ¶æ€: ç‹¬ç«‹è¿è¡Œ                                   â”‚
â”‚                                                     â”‚
â”‚  â”œâ”€ ä¼šè¯ç®¡ç†                                       â”‚
â”‚  â”œâ”€ æ¶ˆæ¯å¤„ç†                                       â”‚
â”‚  â”œâ”€ æ–‡æ¡£å­˜å‚¨                                       â”‚
â”‚  â”œâ”€ WebSocket æœåŠ¡                                 â”‚
â”‚  â””â”€ Claude é›†æˆ                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ðŸ”„ ä¾èµ–å…³ç³»è¯¦è§£

| æ–¹é¢ | å‰ç«¯ä¾èµ–åŽç«¯ï¼Ÿ | è¯´æ˜Ž |
|------|----------------|------|
| **UI æ˜¾ç¤º** | âŒ ä¸ä¾èµ– | å‰ç«¯å¯ç‹¬ç«‹æ˜¾ç¤ºç•Œé¢ |
| **åˆå§‹åŠ è½½** | âŒ ä¸ä¾èµ– | å‰ç«¯å¯ç‹¬ç«‹å¯åŠ¨å’ŒåŠ è½½ |
| **HMR (çƒ­æ›´æ–°)** | âŒ ä¸ä¾èµ– | Vite å†…éƒ¨å®žçŽ°ï¼Œä¸éœ€è¦åŽç«¯ |
| **é™æ€èµ„æº** | âŒ ä¸ä¾èµ– | ç”± Vite æä¾›ï¼Œä¸éœ€è¦åŽç«¯ |
| **API è°ƒç”¨** | âœ… ä¾èµ– | ä»…åœ¨æ‰§è¡Œ API æ“ä½œæ—¶éœ€è¦ |
| **å®žæ—¶é€šä¿¡** | âœ… ä¾èµ– | WebSocket éœ€è¦åŽç«¯æœåŠ¡ |
| **æ•°æ®æŒä¹…åŒ–** | âœ… ä¾èµ– | å­˜å‚¨æ•°æ®åˆ°æ•°æ®åº“ |

#### ðŸ“ å…·ä½“åœºæ™¯åˆ†æž

**åœºæ™¯1: åŽç«¯å…³é—­ï¼Œå‰ç«¯å¦‚ä½•è¿è¡Œï¼Ÿ**
```
âœ… å¯ä»¥è¿è¡Œ:
   - æ˜¾ç¤º UI ç•Œé¢
   - è¿›è¡Œ UI äº¤äº’
   - çƒ­æ›´æ–°å¼€å‘ (HMR)
   - æŸ¥çœ‹æœ¬åœ°çŠ¶æ€

âŒ æ— æ³•è¿è¡Œ:
   - è°ƒç”¨ API ç«¯ç‚¹
   - èŽ·å–æœåŠ¡å™¨æ•°æ®
   - WebSocket å®žæ—¶é€šä¿¡
   - ä¿å­˜ç”¨æˆ·æ•°æ®
```

**åœºæ™¯2: å‰ç«¯å…³é—­ï¼ŒåŽç«¯å¦‚ä½•è¿è¡Œï¼Ÿ**
```
âœ… åŽç«¯ç»§ç»­è¿è¡Œ:
   - ç»§ç»­æä¾› API æœåŠ¡
   - å¯ç”¨äºŽ curl/postman æµ‹è¯•
   - å¯ç”¨äºŽå…¶ä»–å®¢æˆ·ç«¯è°ƒç”¨
   - æ•°æ®åº“ç»§ç»­æ›´æ–°

âŒ æ— æ³•:
   - æ¸²æŸ“å‰ç«¯ç•Œé¢
```

**åœºæ™¯3: ä¸¤è€…éƒ½è¿è¡Œçš„æ­£å¸¸æƒ…å†µ**
```
âœ… å®Œæ•´åŠŸèƒ½:
   - å‰ç«¯æ˜¾ç¤º UI
   - ç”¨æˆ·ä¸Ž UI äº¤äº’
   - å‰ç«¯è°ƒç”¨åŽç«¯ API
   - åŽç«¯å¤„ç†ä¸šåŠ¡é€»è¾‘
   - æ•°æ®å®žæ—¶åŒæ­¥
   - WebSocket å®žæ—¶æ›´æ–°
```

#### ðŸŽ¯ åŽç«¯å¯åŠ¨å¯¹å‰ç«¯çš„å½±å“

| æ“ä½œ | å‰ç«¯æ˜¯å¦éœ€è¦é‡å¯ï¼Ÿ | å¯¹å‰ç«¯çš„å½±å“ |
|------|-------------------|------------|
| åŽç«¯å¯åŠ¨ | âŒ ä¸éœ€è¦ | æ— å½±å“ |
| åŽç«¯å…³é—­ | âŒ ä¸éœ€è¦ | æ— å½±å“ï¼ˆUI ä»æ˜¾ç¤ºï¼ŒAPI å¤±è´¥ï¼‰ |
| åŽç«¯é‡å¯ | âŒ ä¸éœ€è¦ | å¯èƒ½å¯¼è‡´æ­£åœ¨è¿›è¡Œçš„ API è°ƒç”¨å¤±è´¥ |
| åŽç«¯æ›´æ–°ä»£ç  | âŒ ä¸éœ€è¦ | å‰ç«¯è‡ªåŠ¨è°ƒç”¨æ–°çš„ API å®žçŽ° |
| å‰ç«¯å¯åŠ¨ | âœ… åŽç«¯éœ€è¦å¯åŠ¨ | éœ€è¦åŽç«¯æ‰èƒ½èŽ·å–æ•°æ® |
| å‰ç«¯å…³é—­ | âŒ ä¸éœ€è¦ | æ— å½±å“ |

---

## ðŸ“Œ æ€»ç»“

### 1ï¸âƒ£ **åŽç«¯è‡ªåŠ¨å…³é—­çš„åŽŸå› **
âŒ **ä¸æ˜¯å…³é—­ï¼Œè€Œæ˜¯ä¸€ç›´åœ¨è¿è¡Œ**
- å½“å‰çŠ¶æ€: è¿è¡Œä¸­ (18å°æ—¶40åˆ†é’Ÿ)
- å¦‚æžœä¹‹å‰å…³é—­ï¼ŒåŽŸå› é€šå¸¸æ˜¯ä»£ç é”™è¯¯æˆ–èµ„æºé—®é¢˜
- å·²ä¿®å¤æ‰€æœ‰å·²çŸ¥çš„ä»£ç é—®é¢˜

### 2ï¸âƒ£ **å‰ç«¯ä¸ŽåŽç«¯è¿žé€šæ€§**
âœ… **å®Œå…¨è¿žé€š**
- ç½‘ç»œè¿žæŽ¥: æ­£å¸¸
- åŽç«¯å“åº”: æ­£å¸¸
- API é€šé“: ç•…é€š
- WebSocket: å¯ç”¨

### 3ï¸âƒ£ **åŽç«¯å¯åŠ¨ä¸Žå‰ç«¯çš„å…³è”**
ðŸ”€ **æ¾è€¦åˆï¼ŒåŸºæœ¬æ— å…³è”**

| å‰ç«¯è¿è¡Œ | åŽç«¯è¿è¡Œ | å‰ç«¯è¡¨çŽ° |
|---------|--------|---------|
| âœ… | âœ… | âœ… å®Œæ•´åŠŸèƒ½ |
| âœ… | âŒ | âš ï¸ UI å¯æ˜¾ç¤ºï¼ŒAPI å¤±è´¥ |
| âŒ | âœ… | æ— å‰ç«¯ç•Œé¢ |
| âŒ | âŒ | éƒ½ä¸å·¥ä½œ |

**å…³é”®ç‚¹:**
- å‰ç«¯æ˜¯ **å®Œå…¨ç‹¬ç«‹** çš„ UI åº”ç”¨
- åŽç«¯å¯åŠ¨çŠ¶æ€ **ä¸å½±å“** å‰ç«¯çš„ UI æ˜¾ç¤º
- å‰ç«¯åªåœ¨è°ƒç”¨ API æ—¶æ‰ä¾èµ–åŽç«¯
- ä¸¤ä¸ªè¿›ç¨‹å¯ä»¥ç‹¬ç«‹å¯åœ

---

## ðŸš€ å»ºè®®

### å¦‚ä½•ä¿æŒåŽç«¯æŒç»­è¿è¡Œï¼Ÿ

**æ–¹æ³•1: ä½¿ç”¨ `nohup`ï¼ˆæŽ¨èï¼‰**
```bash
nohup python -m uvicorn src.main:app --host 0.0.0.0 --port 8000 > backend.log 2>&1 &
```

**æ–¹æ³•2: ä½¿ç”¨ `screen` æˆ– `tmux`**
```bash
screen -S backend -d -m python -m uvicorn src.main:app --host 0.0.0.0 --port 8000
```

**æ–¹æ³•3: ä½¿ç”¨ `systemd` æœåŠ¡**
```bash
# åˆ›å»ºæœåŠ¡æ–‡ä»¶
sudo tee /etc/systemd/system/fastapi-backend.service > /dev/null <<EOF
[Unit]
Description=FastAPI Backend
After=network.target

[Service]
Type=simple
User=jack
WorkingDirectory=/mnt/d/å·¥ä½œåŒº/äº‘å¼€å‘/working
ExecStart=/path/to/python -m uvicorn src.main:app --host 0.0.0.0 --port 8000
Restart=always

[Install]
WantedBy=multi-user.target
EOF

# å¯åŠ¨æœåŠ¡
sudo systemctl start fastapi-backend
sudo systemctl enable fastapi-backend
```

**æ–¹æ³•4: åœ¨ Docker ä¸­è¿è¡Œ**
```bash
docker run -d --name fastapi-backend -p 8000:8000 fastapi-app
```

---

## ðŸ“ž ç›‘æŽ§å‘½ä»¤

```bash
# æ£€æŸ¥åŽç«¯çŠ¶æ€
curl http://localhost:8000/health

# ç›‘æŽ§åŽç«¯æ—¥å¿—
tail -f backend.log

# ç›‘æŽ§è¿›ç¨‹
watch -n 1 'lsof -i :8000'

# æ£€æŸ¥å‰åŽç«¯é€šä¿¡
curl -v http://localhost:8000/api/v1/documents
```

---

**æŠ¥å‘Šç”Ÿæˆ**: 2025-11-21 04:54 UTC
**ç³»ç»ŸçŠ¶æ€**: âœ… **å‰åŽç«¯éƒ½åœ¨æ­£å¸¸è¿è¡Œï¼Œå¯ä»¥å¼€å§‹å¼€å‘å·¥ä½œ**
