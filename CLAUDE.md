
[é¡¹ç›®è®°å¿†è§„åˆ™]
        - **å¿…é¡»ä¸»åŠ¨è°ƒç”¨** progress-recorder agent æ¥è®°å½•é‡è¦å†³ç­–ã€ä»»åŠ¡å˜æ›´ã€å®Œæˆäº‹é¡¹ç­‰å…³é”®ä¿¡æ¯åˆ°progress.md
        - æ£€æµ‹åˆ°ä»¥ä¸‹æƒ…å†µæ—¶**ç«‹å³è‡ªåŠ¨è§¦å‘** progress-recorder:
               *   å‡ºç°"å†³å®šä½¿ç”¨/æœ€ç»ˆé€‰æ‹©/å°†é‡‡ç”¨"ç­‰å†³ç­–è¯­è¨€
               *   å‡ºç°"å¿…é¡»/ä¸èƒ½/è¦æ±‚"ç­‰çº¦æŸè¯­è¨€
               *   å‡ºç°"å®Œæˆäº†/å®ç°äº†/ä¿®å¤äº†"ç­‰å®Œæˆæ ‡è¯†
               *   å‡ºç°"éœ€è¦/åº”è¯¥/è®¡åˆ’"ç­‰æ–°ä»»åŠ¡
        - å½“ progress.md çš„ Notes/Done æ¡ç›®è¿‡å¤š (>100æ¡)å½±å“é˜…è¯»æ—¶ï¼Œåº”å½’æ¡£åˆ° progress.archive.md

[æŒ‡ä»¤é›† - å‰ç¼€ "/"]
        - recordï¼šä½¿ç”¨ progress-recorder æ‰§è¡Œå¢é‡åˆå¹¶ä»»åŠ¡
        - archiveï¼šä½¿ç”¨ progress-recorder æ‰§è¡Œå¿«ç…§å½’æ¡£ä»»åŠ¡
        - recapï¼šé˜…è¯» progress.mdï¼Œå›é¡¾é¡¹ç›®å½“å‰çŠ¶æ€ï¼ˆåŒ…æ‹¬ä½†ä¸ä»…é™äºå…³é”®çº¦æŸã€å¾…åŠäº‹é¡¹ã€å®Œæˆæ—¶åº¦ç­‰ï¼‰

[ä»£ç æ¨¡å—ç´¢å¼•]
        - éœ€è¦ç†è§£ `src/` ç»“æ„æ—¶ï¼Œä¼˜å…ˆæŸ¥é˜… `docs/guides/MODULE_OVERVIEW.md`ã€‚è¯¥æ–‡æ¡£æŒ‰ FastAPI åº”ç”¨ã€API è·¯ç”±ã€æœåŠ¡ã€ä»“å‚¨ã€ä¸­é—´ä»¶ä¸å·¥å…·ç­‰æ¨¡å—æ€»ç»“åŠŸèƒ½ï¼Œä¾¿äº CLAUDE code å¿«é€Ÿå®šä½å®ç°ã€‚

[ä»£ç å¼€å‘å·¥ä½œæµ - æ¨¡å—æ–‡æ¡£æ›´æ–°è§„åˆ™]
        - **å¿…é¡»åœ¨ä»»ä½• src/ ç›®å½•ä»£ç å˜æ›´å®Œæˆå** ç«‹å³æ‰§è¡Œ /update-module-docs å‘½ä»¤æ›´æ–°æ¨¡å—æ–‡æ¡£
        - **å¿…é¡»åœ¨ç”Ÿæˆæ€»ç»“æ–‡æ¡£å‰** ç¡®ä¿ docs/guides/MODULE_OVERVIEW.md å·²åŒæ­¥æ›´æ–°
        - æ£€æµ‹åˆ°ä»¥ä¸‹æƒ…å†µæ—¶**å¿…é¡»ç«‹å³è§¦å‘æ–‡æ¡£æ›´æ–°**:
               * åœ¨ src/ ç›®å½•ä¸‹åˆ›å»ºäº†æ–°çš„ .py æ–‡ä»¶ï¼ˆæ–°æ¨¡å—ã€æ–°æœåŠ¡ã€æ–°APIè·¯ç”±ï¼‰
               * ä¿®æ”¹äº†ç°æœ‰æ¨¡å—çš„å‡½æ•°ç­¾åã€ç±»å®šä¹‰æˆ–æ ¸å¿ƒåŠŸèƒ½
               * åˆ é™¤æˆ–é‡å‘½åäº†æ¨¡å—ä¸­çš„å…³é”®åŠŸèƒ½ã€ç±»æˆ–å‡½æ•°
               * æ·»åŠ äº†æ–°çš„ API è·¯ç”±æˆ–æœåŠ¡ç«¯ç‚¹
               * ä¿®æ”¹äº†æ•°æ®åº“æ¨¡å‹æˆ–ä»“å‚¨å±‚
        - æ¨¡å—æ–‡æ¡£æ›´æ–°å†…å®¹åº”åŒ…å«:
               * æ–°å¢åŠŸèƒ½çš„è¯¦ç»†è¯´æ˜å’Œç”¨é€”
               * ä¿®æ”¹çš„æ¥å£/å‡½æ•°ç­¾åï¼ˆåŒ…æ‹¬å‚æ•°ã€è¿”å›å€¼ï¼‰
               * ç›¸å…³ä»£ç çš„æ–‡ä»¶è·¯å¾„å’Œè¡Œå·å¼•ç”¨ï¼ˆæ ¼å¼: file_path:line_numberï¼‰
               * åˆ é™¤çš„è¿‡æ—¶æ¨¡å—è¯´æ˜ï¼ˆå¦‚é€‚ç”¨ï¼‰
               * æ¨¡å—é—´çš„ä¾èµ–å…³ç³»å’Œè°ƒç”¨å…³ç³»ï¼ˆå¦‚æœ‰å˜åŒ–ï¼‰
        - ä½¿ç”¨å·¥å…·: ä¼˜å…ˆä½¿ç”¨ /update-module-docs å‘½ä»¤ï¼Œé€šè¿‡è¯¥å‘½ä»¤è‡ªåŠ¨è¯»å–ã€åˆ†æå’Œæ›´æ–°æ–‡æ¡£

[æ–‡ä»¶è¾“å‡ºè§„åˆ™æ”¹è¿›è®°å½•]
        - **2025-11-17 v2.3**: Hookè„šæœ¬æœ€ç»ˆå®Œç¾ä¼˜åŒ–
               * âœ… æ­£ç¡®åŒºåˆ†æŠ¥å‘Šæ–‡æ¡£vsçº¯ç²¹çŠ¶æ€æ ‡è®°
               * âœ… EPIC_*å‰ç¼€æ–‡ä»¶è¯†åˆ«ä¸ºæŠ¥å‘Šï¼ˆdocs/reference/ï¼‰
               * âœ… _COMPLETION_/_IMPLEMENTATION_/_REMEDIATION_è¯†åˆ«ä¸ºæŠ¥å‘Š
               * âœ… FINALã€SUMMARYè¯è¯†åˆ«ä¸ºæŠ¥å‘Šæ–‡æ¡£
               * âœ… 6ä¸ªEpicå®ŒæˆæŠ¥å‘Šæ­£ç¡®å½’æ¡£åˆ°docs/reference/
               * âœ… is_priority1_fileå’Œget_target_locationé€»è¾‘å®Œå…¨åŒæ­¥
               * âœ… æ‰€æœ‰29ä¸ªæ–‡æ¡£æ–‡ä»¶100%æ­£ç¡®åˆ†ç±»

        - **2025-11-17 v2.2**: Hookè„šæœ¬æœ€ç»ˆä¼˜åŒ–å®Œæˆ
               * .txtæ–‡ä»¶æ”¯æŒ
               * æ— ä¼˜å…ˆçº§å…³é”®è¯æ–‡ä»¶é»˜è®¤è§„åˆ™
               * CURRENT_STATUSâ†’docs/referenceç­‰ç‰¹å®šæ–‡ä»¶æ˜ å°„

        - **2025-11-17 v2.1**: çŠ¶æ€æ ‡è®°ä¼˜å…ˆçº§åˆ¤æ–­æ”¹è¿›
               * SUCCESS/COMPLETEä¼˜å…ˆä¿ç•™åœ¨æ ¹ç›®å½•ï¼ˆåè¢«v2.3çº æ­£ï¼‰
               * ç‰¹æ®Šè§„åˆ™ï¼šREPORTä¼˜å…ˆäºSUCCESS

        - **2025-11-17 v2.0**: å¢å¼ºHookè„šæœ¬è§„åˆ™åˆç‰ˆ
               * åŒå‘æ–‡ä»¶æ•´ç†ï¼ˆæ ¹ç›®å½•â†”docs/ï¼‰
               * æ™ºèƒ½ä¼˜å…ˆçº§åˆ¤æ–­å¤„ç†å…³é”®è¯å†²çª
               * æ ¹ç›®å½•æ‰«æåŠŸèƒ½

        - è§„åˆ™å®šä¹‰ï¼ˆv2.3æœ€ç»ˆç‰ˆï¼‰ï¼š
               * Priority 1 (æ ¹ç›®å½•): çº¯ç²¹çš„é¡¹ç›®çŠ¶æ€æ ‡è®° (PROJECT_*, SYSTEM_*ç­‰ç®€çŸ­æ ‡è®°)
               * Priority 2 (docs/): æ‰€æœ‰è¯¦ç»†æŠ¥å‘Š (EPIC_*, *_COMPLETION_, *_FINALç­‰)
               * ç‰¹æ®Šè§„åˆ™: EPIC_å‰ç¼€ã€FINALã€SUMMARYã€_IMPLEMENTATION_ç­‰â†’docs/reference/


## ğŸ”§ Technical Architecture

### System Components

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚               LangChain Application                       â”‚
â”‚          (AI Conversation Backend)                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                   â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                     â”‚
        â–¼                     â–¼
   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
   â”‚  LangChain â”‚      â”‚   RAG API   â”‚
   â”‚  Agents    â”‚      â”‚  Endpoints  â”‚
   â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
          â”‚                   â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Python asyncpg    â”‚
          â”‚  (Connection Pool) â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                    â”‚
          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
          â”‚  Coolify PostgreSQL Server      â”‚
          â”‚  IP: 47.79.87.199:5432         â”‚
          â”‚                                â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚  Lantern Extension       â”‚ â”‚
          â”‚  â”‚  - HNSW Vector Index     â”‚ â”‚
          â”‚  â”‚  - Vector Operations     â”‚ â”‚
          â”‚  â”‚  - Similarity Search     â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â”‚                                â”‚
          â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
          â”‚  â”‚  PostgreSQL 15.8         â”‚ â”‚
          â”‚  â”‚  - Documents Table       â”‚ â”‚
          â”‚  â”‚  - Conversations Table   â”‚ â”‚
          â”‚  â”‚  - Search History        â”‚ â”‚
          â”‚  â”‚  - Job Queue             â”‚ â”‚
          â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Data Flow: RAG Query Pipeline

```
User Query
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. Encode Query     â”‚
â”‚ (Embedding Model)   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ 1,536-dim vector
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. Search Similar Documents  â”‚
â”‚ (Lantern HNSW Index)         â”‚
â”‚ Query: embedding <-> query   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Top 5 results with distances
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. Retrieve Context          â”‚
â”‚ (Join with metadata)         â”‚
â”‚ Filter by document_type,     â”‚
â”‚ source, date range, etc.     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Rich context documents
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. Generate Response         â”‚
â”‚ (LLM + Context)              â”‚
â”‚ LangChain Chains/Agents      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚ Generated answer
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 5. Store in History          â”‚
â”‚ search_history table         â”‚
â”‚ For analytics & optimization â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
    Return to User
```

---

# ğŸ“ æ‚¨çš„ Coolify PostgreSQL ä¿¡æ¯

æ ¹æ® `.env` æ–‡ä»¶ä¸­çš„é…ç½®ï¼š

| é…ç½®é¡¹ | å€¼ |
|--------|-----|
| **åº”ç”¨ UUID** | ok0s0cgw8ck0w8kgs8kk4kk8 |
| **åº”ç”¨å** | docker-image-ok0s0cgw8ck0w8kgs8kk4kk8 |
| **FQDN** | https://pgvctor.jackcwf.com |
| **ç”¨æˆ·å** | jackcwf888 |
| **ç«¯å£** | 5432 |
| **æ•°æ®åº“** | postgres |

âš ï¸ **é‡è¦**: å¯†ç å­˜å‚¨åœ¨ `.env` æ–‡ä»¶ä¸­ï¼Œä¸åœ¨æœ¬æŒ‡å—ä¸­æ˜¾ç¤º

---

## ğŸ“‹ è·å–å®é™…çš„ PostgreSQL è¿æ¥ä¿¡æ¯

### æ–¹æ³• 1: é€šè¿‡ Coolify ç½‘é¡µç•Œé¢

```
1. è®¿é—® https://coolpanel.jackcwf.com
2. ä½¿ç”¨å‡­è¯ç™»å½•
3. å¯¼èˆªåˆ°åº”ç”¨ç®¡ç†
4. æ‰¾åˆ° PostgreSQL åº”ç”¨ (ok0s0cgw8ck0w8kgs8kk4kk8)
5. æŸ¥çœ‹"è¿æ¥ä¿¡æ¯"æˆ–"ç¯å¢ƒå˜é‡"
6. å¤åˆ¶ POSTGRES_HOST çš„å®é™…å€¼ï¼ˆIP åœ°å€æˆ–åŸŸåï¼‰
7. ç¡®è®¤ç«¯å£ï¼ˆé€šå¸¸æ˜¯ 5432ï¼‰
```

### æ–¹æ³• 2: é€šè¿‡ Coolify CLI

```bash
# è·å–åº”ç”¨è¯¦ç»†ä¿¡æ¯ï¼ˆéœ€è¦ Coolify CLI é…ç½®ï¼‰
coolify app show ok0s0cgw8ck0w8kgs8kk4kk8 --show-sensitive --format json

# æŸ¥æ‰¾ POSTGRES_HOST å­—æ®µä¸­çš„å®é™…ä¸»æœºå€¼
```

### æ–¹æ³• 3: æµ‹è¯•è¿æ¥

```bash
# ä½¿ç”¨ psql æµ‹è¯•è¿æ¥ï¼ˆéœ€è¦å®‰è£… PostgreSQL å®¢æˆ·ç«¯ï¼‰
psql -h <POSTGRES_HOST> -U jackcwf888 -d postgres -c "SELECT version();"

# ç³»ç»Ÿä¼šæç¤ºè¾“å…¥å¯†ç 
# å¦‚æœè¿æ¥æˆåŠŸï¼Œæ‚¨å°†çœ‹åˆ° PostgreSQL ç‰ˆæœ¬ä¿¡æ¯
```

---

## âœ… éªŒè¯ pgvector æ‰©å±•

pgvector æ˜¯å‘é‡æœç´¢æ‰€å¿…éœ€çš„ï¼š

```sql
-- ç™»å½•åˆ° PostgreSQL
psql -h <POSTGRES_HOST> -U jackcwf888 -d postgres

-- æ£€æŸ¥æ˜¯å¦å·²å®‰è£…
SELECT extname FROM pg_extension WHERE extname = 'vector';

-- å¦‚æœæœªå®‰è£…ï¼Œåˆ›å»ºæ‰©å±•ï¼ˆéœ€è¦è¶…çº§ç”¨æˆ·æƒé™ï¼‰
CREATE EXTENSION IF NOT EXISTS vector;

-- éªŒè¯
SELECT version FROM pg_extension WHERE extname = 'vector';
```

---

## ğŸ“¦ ä¾èµ–åŒ…ç®¡ç†æŒ‡å—

### å·¥å…·é€‰æ‹©ç­–ç•¥

æœ¬é¡¹ç›®æ”¯æŒä¸¤ç§ä¾èµ–åŒ…ç®¡ç†å·¥å…·ï¼ŒCLAUDE åº”æ ¹æ®ä»¥ä¸‹åœºæ™¯è¿›è¡Œé€‰æ‹©ï¼š

#### **ä¼˜å…ˆä½¿ç”¨ UVï¼ˆæ¨èï¼‰**
- **ä¼˜ç‚¹**ï¼šæå¿«çš„å®‰è£…é€Ÿåº¦ã€å†…å­˜å ç”¨ä½ã€å†…ç½®è™šæ‹Ÿç¯å¢ƒç®¡ç†
- **åœºæ™¯**ï¼š
  - å¿«é€Ÿå®‰è£…ä¾èµ–ï¼ˆå¼€å‘ã€æµ‹è¯•ã€éƒ¨ç½²ï¼‰
  - åœ¨èµ„æºå—é™çš„ç¯å¢ƒä¸­è¿è¡Œ
  - CI/CD æµç¨‹ï¼ˆGitHub Actionsã€Docker æ„å»ºï¼‰
  - å¿«é€Ÿè¿­ä»£å¼€å‘

#### **ä½¿ç”¨ Poetryï¼ˆå¤‡é€‰ï¼‰**
- **ä¼˜ç‚¹**ï¼šå®Œæ•´çš„é¡¹ç›®ä¾èµ–é”å®šã€ä¾èµ–å†²çªè§£å†³ã€å‘å¸ƒç®¡ç†
- **åœºæ™¯**ï¼š
  - éœ€è¦å®Œæ•´çš„ä¾èµ–ç‰ˆæœ¬é”å®šï¼ˆpoetry.lockï¼‰
  - å‘å¸ƒé¡¹ç›®åˆ° PyPI
  - å¤æ‚çš„ä¾èµ–å†²çªéœ€è¦è§£å†³

---

### ğŸ“‹ UV ä½¿ç”¨æŒ‡å—ï¼ˆæ¨èï¼‰

#### å®‰è£… UV
```bash
# åœ¨ macOS å’Œ Linux ä¸Šå®‰è£…
curl -LsSf https://astral.sh/uv/install.sh | sh

# æˆ–é€šè¿‡åŒ…ç®¡ç†å™¨ï¼ˆLinuxï¼‰
apt-get install uv  # Debian/Ubuntu
brew install uv     # macOS

# Windowsï¼ˆéœ€è¦ PowerShellï¼‰
powershell -ExecutionPolicy BypassUser -c "irm https://astral.sh/uv/install.ps1 | iex"
```

#### UV åŸºæœ¬å‘½ä»¤

**1. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¯é€‰ï¼ŒUV ä¼šè‡ªåŠ¨åˆ›å»ºï¼‰**
```bash
uv venv                    # åˆ›å»º .venv
source .venv/bin/activate  # æ¿€æ´»ï¼ˆLinux/macOSï¼‰
.venv\Scripts\activate     # æ¿€æ´»ï¼ˆWindowsï¼‰
```

**2. å®‰è£…ä¾èµ– - åœºæ™¯æŒ‡å—**

```bash
# åœºæ™¯ 1: å¼€å‘ç¯å¢ƒï¼ˆåŒ…å«æ‰€æœ‰ä¾èµ– + å¼€å‘å·¥å…·ï¼‰
uv pip install -e ".[dev,test]"

# åœºæ™¯ 2: ç”Ÿäº§ç¯å¢ƒï¼ˆä»…è¿è¡Œæ—¶ä¾èµ–ï¼‰
uv pip install -e "."

# åœºæ™¯ 3: æµ‹è¯•ç¯å¢ƒï¼ˆè¿è¡Œæ—¶ + æµ‹è¯•å·¥å…·ï¼‰
uv pip install -e ".[test]"

# åœºæ™¯ 4: å¿«é€Ÿå°è¯•ï¼ˆä¸å®‰è£…é¡¹ç›®ï¼Œä»…å®‰è£…ä¾èµ–ï¼‰
uv pip install -r requirements.txt  # å¦‚æœæœ‰ requirements.txt
uv pip install fastapi uvicorn sqlalchemy pytest pytest-asyncio

# åœºæ™¯ 5: æ›´æ–°ä¾èµ–åˆ°æœ€æ–°ç‰ˆæœ¬
uv pip install --upgrade -e ".[dev,test]"

# åœºæ™¯ 6: æŸ¥çœ‹å·²å®‰è£…çš„ä¾èµ–
uv pip list
uv pip show <package-name>
```

**3. è¿è¡Œæµ‹è¯•**
```bash
# åœºæ™¯ 1: è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest tests/ -v

# åœºæ™¯ 2: è¿è¡Œç‰¹å®šæµ‹è¯•æ–‡ä»¶
uv run pytest tests/test_story33_performance.py -v

# åœºæ™¯ 3: è¿è¡Œç‰¹å®šæµ‹è¯•ç±»æˆ–æ–¹æ³•
uv run pytest tests/test_story33_performance.py::TestPerformance::test_rag_search -v

# åœºæ™¯ 4: è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
uv run pytest tests/ --cov=src --cov-report=html

# åœºæ™¯ 5: è¿è¡Œ E2E æµ‹è¯•
uv run pytest tests/test_story33_e2e_integration.py -v --tb=short
```

**4. è¿è¡Œåº”ç”¨**
```bash
# å¼€å‘ç¯å¢ƒï¼ˆå¸¦çƒ­é‡è½½ï¼‰
uv run uvicorn src.main:app --reload --host 0.0.0.0 --port 8000

# ç”Ÿäº§ç¯å¢ƒ
uv run gunicorn -w 4 -k uvicorn.workers.UvicornWorker src.main:app
```

---

### ğŸ“¦ Poetry ä½¿ç”¨æŒ‡å—ï¼ˆå¤‡é€‰ï¼‰

#### å®‰è£… Poetry
```bash
# æ¨èæ–¹å¼ï¼ˆä¸€è¡Œå®‰è£…ï¼‰
curl -sSL https://install.python-poetry.org | python3 -

# macOS
brew install poetry

# éªŒè¯å®‰è£…
poetry --version
```

#### Poetry åŸºæœ¬å‘½ä»¤

**1. åˆå§‹åŒ–é¡¹ç›®ï¼ˆå¦‚æœéœ€è¦ï¼‰**
```bash
poetry init
```

**2. å®‰è£…ä¾èµ–**
```bash
# åœºæ™¯ 1: å®Œæ•´å®‰è£…ï¼ˆåŒ…å«æ‰€æœ‰ä¾èµ–ï¼‰
poetry install

# åœºæ™¯ 2: ä»…å®‰è£…ç”Ÿäº§ä¾èµ–ï¼ˆä¸å®‰è£…å¼€å‘ä¾èµ–ï¼‰
poetry install --no-dev

# åœºæ™¯ 3: æ›´æ–°ä¾èµ–åˆ°æœ€æ–°å…¼å®¹ç‰ˆæœ¬
poetry update

# åœºæ™¯ 4: æ·»åŠ æ–°ä¾èµ–
poetry add fastapi          # ç”Ÿäº§ä¾èµ–
poetry add pytest --group dev  # å¼€å‘ä¾èµ–
```

**3. è¿è¡Œæµ‹è¯•å’Œå‘½ä»¤**
```bash
# è¿è¡Œæµ‹è¯•
poetry run pytest tests/ -v

# è¿è¡Œç‰¹å®šåº”ç”¨
poetry run uvicorn src.main:app --reload

# è¿›å…¥ poetry ç¯å¢ƒçš„ Python shell
poetry shell
python  # ç°åœ¨å¯ä»¥ç›´æ¥ä½¿ç”¨é¡¹ç›®çš„ä¾èµ–
```

**4. é”å®šä¾èµ–ç‰ˆæœ¬**
```bash
# ç”Ÿæˆ poetry.lockï¼ˆæ‰€æœ‰ä¾èµ–çš„ç²¾ç¡®ç‰ˆæœ¬ï¼‰
poetry lock

# æŸ¥çœ‹ä¾èµ–æ ‘
poetry show --tree
```

---

### ğŸ¯ åœºæ™¯å†³ç­–æ ‘

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      éœ€è¦ç®¡ç†é¡¹ç›®ä¾èµ–ï¼Ÿ                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”
       â”‚               â”‚
       â–¼               â–¼
    åªæƒ³    éœ€è¦å®Œæ•´ä¾èµ–
   å¿«é€Ÿ    ç‰ˆæœ¬é”å®šï¼Ÿ
   å®‰è£…ï¼Ÿ
       â”‚               â”‚
      UV            Poetry
   ï¼ˆæ¨èï¼‰         ï¼ˆå¤‡é€‰ï¼‰
       â”‚               â”‚
    â”Œâ”€â”€â”´â”€â”€â”€â”€â”€â”€â”        â”‚
    â”‚å¿«é€Ÿâœ“    â”‚        â”‚
    â”‚ç®€å•âœ“    â”‚        â”‚
    â”‚èµ„æºå°‘âœ“  â”‚    å®Œæ•´âœ“
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    å¯é âœ“
                   ç‰ˆæœ¬é”å®šâœ“
```

---

### ğŸ”§ CLAUDE ä¾èµ–ç®¡ç†å†³ç­–è§„åˆ™

CLAUDE åº”æ ¹æ®ä»¥ä¸‹è§„åˆ™é€‰æ‹©åŒ…ç®¡ç†å·¥å…·ï¼š

| åœºæ™¯ | ä¼˜å…ˆå·¥å…· | å‘½ä»¤ç¤ºä¾‹ |
|------|---------|---------|
| **å¼€å‘+æµ‹è¯•** | UV | `uv pip install -e ".[dev,test]"` |
| **ä»…è¿è¡Œåº”ç”¨** | UV | `uv pip install -e "."` |
| **è¿è¡Œæµ‹è¯•å¥—ä»¶** | UV | `uv run pytest tests/ -v` |
| **å‘å¸ƒåˆ° PyPI** | Poetry | `poetry publish` |
| **å®Œæ•´ä¾èµ–é”å®š** | Poetry | `poetry lock && poetry install` |
| **å¿«é€ŸåŸå‹å¼€å‘** | UV | `uv pip install <package>` |
| **CI/CD æµç¨‹** | UV | `uv pip install -e "."; uv run pytest` |
| **è™šæ‹Ÿç¯å¢ƒç®¡ç†** | UV å†…ç½® | `uv venv; source .venv/bin/activate` |
| **ç”Ÿäº§éƒ¨ç½²** | UV | `uv pip install -e "."`ï¼ˆç„¶å Docker/VMï¼‰ |
| **ä¾èµ–å†²çªè§£å†³** | Poetry | `poetry lock --no-update` |

---

### ğŸš€ å¿«é€Ÿå‘½ä»¤å‚è€ƒ

#### UVï¼ˆæ¨èç”¨äºå¿«é€Ÿå¼€å‘å’Œæµ‹è¯•ï¼‰
```bash
# ä¸€æ­¥å®Œæˆï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒå¹¶å®‰è£…æ‰€æœ‰ä¾èµ–
uv venv && source .venv/bin/activate && uv pip install -e ".[dev,test]"

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
uv run pytest tests/ -v

# è¿è¡Œåº”ç”¨
uv run uvicorn src.main:app --reload

# å¸è½½ä¾èµ–
uv pip uninstall <package-name>
```

#### Poetryï¼ˆç”¨äºå¤æ‚é¡¹ç›®å’Œå‘å¸ƒï¼‰
```bash
# å®Œæ•´é¡¹ç›®åˆå§‹åŒ–
poetry install

# è¿è¡Œæµ‹è¯•
poetry run pytest tests/ -v

# æ·»åŠ æ–°ä¾èµ–
poetry add <package-name>

# ç”Ÿæˆ lock æ–‡ä»¶
poetry lock
```

---

### âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¸è¦æ··ç”¨**ï¼šåœ¨åŒä¸€ä¸ªé¡¹ç›®ä¸­ä¸è¦åŒæ—¶ä½¿ç”¨ UV å’Œ Poetryï¼Œé€‰æ‹©ä¸€ä¸ªåšæŒä½¿ç”¨
2. **è™šæ‹Ÿç¯å¢ƒ**ï¼šUV ä¼šè‡ªåŠ¨ç®¡ç†è™šæ‹Ÿç¯å¢ƒï¼ŒPoetry éœ€è¦æ‰‹åŠ¨æ¿€æ´»
3. **.venv ä½ç½®**ï¼šç¡®ä¿åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼Œä¾¿äº IDE è¯†åˆ«
4. **CI/CD**ï¼šä¼˜å…ˆåœ¨ CI/CD æµç¨‹ä¸­ä½¿ç”¨ UVï¼ˆæ›´å¿«æ›´ç¨³å®šï¼‰
5. **ç‰ˆæœ¬å…¼å®¹æ€§**ï¼š`pyproject.toml` ä¸­çš„ `requires-python = ">=3.12"` å¿…é¡»éµå®ˆ

---