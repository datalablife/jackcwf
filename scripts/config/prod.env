# ============================================================================
# 生产环境配置 (Production Environment)
# 注意：敏感信息应该通过 Coolify 注入，不应该在这个文件中硬编码
# ============================================================================

# 环境标识
ENVIRONMENT=production

# ============================================================================
# 后端配置
# ============================================================================

# 数据库连接（生产环境）
# 注意：实际的连接字符串应该通过 Coolify 注入，这里只是示例
DATABASE_URL=postgresql+asyncpg://jackcwf888:Jack_00492300@pgvctor.jackcwf.com:5432/data_management_prod

# 后端服务配置
BACKEND_HOST=0.0.0.0
BACKEND_PORT=8000
BACKEND_WORKERS=4  # 将由脚本根据 CPU 核数动态调整
BACKEND_RELOAD=false

# Python 配置
PYTHONUNBUFFERED=1
PYTHONDONTWRITEBYTECODE=1

# 生产环境：禁用调试
DEBUG=false
LOG_LEVEL=WARNING
ENABLE_API_DOCS=false

# 数据库连接池（生产环境使用更大的池）
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=40
DB_POOL_RECYCLE=3600

# ============================================================================
# 前端配置
# ============================================================================

# 前端服务配置
FRONTEND_PORT=3000
VITE_API_URL=https://api.example.com  # 应该由 Coolify 覆盖

# 前端环境
NODE_ENV=production

# ============================================================================
# CORS 和安全
# ============================================================================

# 允许的 CORS 来源（应该由 Coolify 覆盖）
CORS_ORIGINS=https://example.com

# 启用 HTTPS 和安全 Cookie
HTTPS=true
SECURE_COOKIE=true

# ============================================================================
# 日志配置
# ============================================================================

# 日志目录（生产环境输出到 stdout/stderr）
LOG_DIR=/var/log/app

# 日志级别（生产环境：WARNING 或 ERROR）
LOG_LEVEL=WARNING

# 日志格式（生产环境：JSON 用于日志聚合）
LOG_FORMAT=json

# ============================================================================
# 功能开关
# ============================================================================

# 启用性能监控和指标
ENABLE_METRICS=true
METRICS_PORT=9090

# 禁用热重载（生产环境）
ENABLE_RELOAD=false

# 禁用 API 文档（安全考虑）
ENABLE_API_DOCS=false

# ============================================================================
# 安全配置
# ============================================================================

# API 速率限制
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=60

# 请求验证
VALIDATE_REQUESTS=true
VALIDATE_RESPONSES=true

# CORS 严格模式
CORS_STRICT=true

# ============================================================================
# 其他配置
# ============================================================================

# 超时配置
REQUEST_TIMEOUT=30
DB_CONNECT_TIMEOUT=10
SERVER_SHUTDOWN_TIMEOUT=30

# 重试配置
DB_RETRY_ATTEMPTS=3
DB_RETRY_DELAY=2

# ============================================================================
# 监控和告警
# ============================================================================

# 健康检查
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# 告警配置
ENABLE_ALERTS=true
ALERT_ON_ERROR=true
ALERT_CHANNELS=slack,email

# ============================================================================
# Coolify 特定配置
# ============================================================================

# Coolify 会自动注入这些环境变量，不需要在这里设置：
# - DATABASE_URL（覆盖上面的值）
# - SECRET_KEY（必须）
# - DOMAIN（应用域名）
# - PORT（应用端口）
# 等等

# 注意：不要在生产环境中提交敏感信息到版本控制！
# 使用 .gitignore 排除 .env.production.local 等文件
